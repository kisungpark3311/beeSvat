# User Flow (사용자 흐름도) - beeSvat

> Mermaid 플로우차트로 핵심 기능의 주요 여정을 표현합니다.
> 성공/실패 분기를 포함하고, 온보딩 -> 핵심작업 -> 리텐션 루프를 표현합니다.

---

## MVP 캡슐

| #   | 항목                 | 내용                                                                         |
| --- | -------------------- | ---------------------------------------------------------------------------- |
| 1   | 목표                 | 성경 본문의 구문 구조를 자동 분석하여 초보자도 깊은 묵상을 할 수 있게 돕는다 |
| 2   | 페르소나             | 일반 신자/성경 묵상자 (원어 지식 없는 분)                                    |
| 3   | 핵심 기능            | FEAT-1: 성경 구문 분석 (주동사/수식어 자동 파싱 & 해설)                      |
| 4   | 성공 지표 (노스스타) | 주간 활성 사용자 수                                                          |
| 5   | 입력 지표            | 사용자 만족도 (4.5점 이상)                                                   |
| 6   | 비기능 요구          | 모바일 3초 이내 로딩, 반응형 웹앱                                            |
| 7   | Out-of-scope         | 원어 사전 기능, 소셜 기능, 결제 시스템                                       |
| 8   | Top 리스크           | 구문 분석 AI의 정확도                                                        |
| 9   | 완화/실험            | 개혁신학 관점 검증자 리뷰 프로세스                                           |
| 10  | 다음 단계            | 기획 문서 6종 생성 후 FEAT-1 프로토타입 개발                                 |

---

## 1. 전체 사용자 여정 (Overview)

```mermaid
graph TD
    A[앱 진입] --> B{로그인 상태?}
    B -->|No| C[FEAT-0: 온보딩/로그인]
    B -->|Yes| D[메인 화면]
    C --> D
    D --> E[성경 구절 선택/입력]
    E --> F[FEAT-1: 구문 분석 요청]
    F --> G{분석 성공?}
    G -->|Yes| H[분석 결과 화면]
    G -->|No| I[에러 안내]
    I --> E
    H --> J{추가 활동?}
    J -->|묵상 노트 작성| K[FEAT-3: 묵상 노트]
    J -->|원어 상세 보기| L[FEAT-2: 원어 동사 분석]
    J -->|다른 구절| E
    K --> M[리텐션 루프]
    L --> H
    M --> D
```

---

## 2. FEAT-0: 온보딩/로그인 플로우

```mermaid
graph TD
    A[시작 화면] --> B{신규/기존?}

    %% 신규 사용자
    B -->|신규| C[가입 방법 선택]
    C --> D[이메일 가입]
    C --> E[소셜 로그인 - v2]
    D --> F[이메일 입력]
    F --> G[비밀번호 설정]
    G --> H[닉네임 설정]
    H --> I[온보딩 튜토리얼]
    E --> I
    I --> I1[구문 분석이란?]
    I1 --> I2[사용법 간단 안내]
    I2 --> I3[샘플 분석 체험]
    I3 --> J[메인 화면]

    %% 기존 사용자
    B -->|기존| K[로그인]
    K --> L{성공?}
    L -->|Yes| J
    L -->|No| M[에러 표시]
    M --> N{비밀번호 찾기?}
    N -->|Yes| O[비밀번호 재설정]
    O --> K
    N -->|No| K
```

---

## 3. FEAT-1: 성경 구문 분석 플로우 (MVP 핵심)

```mermaid
graph TD
    A[구문 분석 진입] --> B[성경 구절 입력]
    B --> B1{입력 방식?}

    B1 -->|직접 입력| C[책/장/절 선택]
    B1 -->|오늘의 QT - v2| D[FEAT-4: 두란노 QT 자동 로드]

    C --> E[본문 표시]
    D --> E

    E --> F[구문 분석 요청 버튼]
    F --> G[로딩 표시 - 스트리밍]
    G --> H{분석 성공?}

    H -->|Yes| I[분석 결과 표시]
    H -->|No| J[에러 안내 + 재시도]
    J --> F

    I --> I1[주동사 강조 표시]
    I --> I2[수식어/접속사 구조]
    I --> I3[쉬운 해설 패널]

    I1 --> K{추가 액션?}
    I2 --> K
    I3 --> K

    K -->|원어 상세| L[FEAT-2: 동사 클릭 -> 원어 분석]
    K -->|묵상 노트| M[FEAT-3: 묵상 노트 작성]
    K -->|만족도 평가| N[별점 평가 - 1~5점]
    K -->|다른 구절| B

    N --> O[피드백 저장]
    O --> K
```

---

## 4. FEAT-2: 원어 동사 분석 플로우 (v2)

```mermaid
graph TD
    A[분석 결과에서 동사 클릭] --> B[원어 동사 상세 패널]
    B --> C[원형 표시]
    B --> D[문법 분석 - 시제/태/법/인칭/수]
    B --> E[의미 해설]
    B --> F[동일 원어 사용 구절 목록]

    F --> G{다른 구절 선택?}
    G -->|Yes| H[해당 구절로 이동]
    H --> I[해당 구절 구문 분석]
    G -->|No| J[분석 결과로 돌아가기]
```

---

## 5. FEAT-3: 묵상 노트 플로우 (v2)

```mermaid
graph TD
    A[묵상 노트 진입] --> B{자동 생성?}

    B -->|자동 생성| C[AI 묵상 노트 초안 생성]
    C --> D[초안 표시]
    D --> E[편집 모드]

    B -->|직접 작성| E

    E --> F[묵상 내용 작성]
    F --> G[저장]
    G --> H{성공?}
    H -->|Yes| I[저장 완료 피드백]
    H -->|No| J[에러 안내]
    J --> F

    I --> K{추가 액션?}
    K -->|묵상 이력 보기| L[묵상 노트 목록]
    K -->|분석 결과로| M[분석 결과 화면]
    K -->|메인으로| N[메인 화면]
```

---

## 6. FEAT-4: 성경 본문 자동 가져오기 플로우 (v2)

```mermaid
graph TD
    A[메인 화면] --> B[오늘의 QT 버튼]
    B --> C{두란노 연동 성공?}
    C -->|Yes| D[오늘의 QT 본문 표시]
    C -->|No| E[연동 실패 안내]
    E --> F[직접 구절 입력으로 전환]
    D --> G[구문 분석 진행 - FEAT-1]
    F --> G
```

---

## 7. 리텐션 루프 (습관 형성)

```mermaid
graph TD
    A[구문 분석 완료] --> B[분석 결과 만족도 평가]
    B --> C[묵상 기록 저장]
    C --> D[연속 묵상 일수 표시]

    %% 리마인더 루프
    E[다음 날 아침] --> F{알림 설정?}
    F -->|Yes| G[아침 묵상 알림]
    G --> H[앱 재진입]
    H --> A

    F -->|No| I[자연 재방문]
    I --> A

    %% 동기부여 루프
    D --> J{연속 7일 달성?}
    J -->|Yes| K[축하 메시지]
    K --> A
    J -->|No| L[오늘의 구절 추천]
    L --> A
```

---

## 8. 에러 처리 플로우

```mermaid
graph TD
    A[에러 발생] --> B{에러 유형?}

    B -->|네트워크| C[연결 재시도 안내]
    B -->|입력 오류| D[입력 필드별 에러 표시]
    B -->|AI 분석 실패| E[분석 재시도 안내]
    B -->|권한 없음| F[로그인 유도]
    B -->|서버 오류| G[잠시 후 재시도 안내]

    C --> H{재시도?}
    H -->|Yes| I[재시도 실행]
    H -->|No| J[오프라인 안내]

    D --> K[사용자 수정]
    K --> L[재제출]

    E --> M{재시도 횟수?}
    M -->|3회 미만| N[자동 재시도]
    M -->|3회 이상| O[수동 재시도 안내 + 다른 구절 제안]

    F --> P[로그인 화면]

    G --> Q[고객 문의 안내]
```

---

## 9. 화면 목록 (Screen Inventory)

| 화면 ID | 화면명          | FEAT   | 진입점     | 주요 액션                         | MVP |
| ------- | --------------- | ------ | ---------- | --------------------------------- | --- |
| S-01    | 시작 화면       | FEAT-0 | 앱 실행    | 로그인/가입 선택                  | O   |
| S-02    | 로그인          | FEAT-0 | S-01       | 이메일 로그인                     | O   |
| S-03    | 회원가입        | FEAT-0 | S-01       | 이메일 계정 생성                  | O   |
| S-04    | 온보딩 튜토리얼 | FEAT-0 | S-03       | 사용법 안내, 샘플 체험            | O   |
| S-05    | 메인 화면       | -      | S-02, S-04 | 구절 입력, QT 본문 로드           | O   |
| S-06    | 구문 분석 결과  | FEAT-1 | S-05       | 구조 확인, 해설 읽기, 만족도 평가 | O   |
| S-07    | 원어 동사 상세  | FEAT-2 | S-06       | 원어 분석 확인, 참조 구절 이동    | -   |
| S-08    | 묵상 노트 작성  | FEAT-3 | S-06       | 노트 작성/편집/저장               | -   |
| S-09    | 묵상 노트 목록  | FEAT-3 | S-05, S-08 | 이력 조회, 노트 선택              | -   |
| S-10    | 오늘의 QT       | FEAT-4 | S-05       | QT 본문 확인, 분석 진행           | -   |
| S-11    | 프로필/설정     | FEAT-0 | S-05       | 알림 설정, 계정 관리              | O   |
| S-12    | 에러 화면       | 공통   | 모든 화면  | 에러 안내, 재시도                 | O   |

---

## Decision Log

| #     | 일자       | 결정 사항                           | 이유                                                    |
| ----- | ---------- | ----------------------------------- | ------------------------------------------------------- |
| UF-01 | 2026-02-26 | 온보딩에 샘플 분석 체험 포함        | 구문 분석이 생소한 개념이므로 실제 체험이 이해에 효과적 |
| UF-02 | 2026-02-26 | 만족도 평가를 분석 결과 화면에 배치 | 입력 지표(만족도 4.5점) 측정을 위한 자연스러운 접점     |
| UF-03 | 2026-02-26 | AI 분석 중 스트리밍 로딩            | 분석 시간(최대 5초)에 대한 사용자 체감 대기시간 감소    |
